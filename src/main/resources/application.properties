spring.application.name=SII-ERP-AI
spring.datasource.url=jdbc:postgresql://${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
spring.datasource.username=${POSTGRES_USER}
spring.datasource.password=${POSTGRES_PASSWORD}
spring.datasource.driverClassName=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.main.allow-bean-definition-overriding=true

# AI Assistant
ai.openai.api-key=${OPENAI_API_KEY}
ai.openai.model=gpt-4-1106-preview
ai.openai.temperature=0.7

# Mail Configuration
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Database Schema Initialization
spring.sql.init.mode=always

langchain4j.google-ai-gemini.chat-model.api-key=${GEMINI_API_KEY}
langchain4j.google-ai-gemini.chat-model.model-name=${GEMINI_MODEL_NAME}
xai.api-key=${XAI_API_KEY}

# Resilience4j Circuit Breaker
resilience4j.circuitbreaker.instances.sii.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.sii.slidingWindowSize=${RESILIENCE4J_SLIDING_WINDOW_SIZE:10}
resilience4j.circuitbreaker.instances.sii.minimumNumberOfCalls=${RESILIENCE4J_MINIMUM_NUMBER_OF_CALLS:5}
resilience4j.circuitbreaker.instances.sii.permittedNumberOfCallsInHalfOpenState=${RESILIENCE4J_PERMITTED_NUMBER_OF_CALLS_IN_HALF_OPEN_STATE:3}
resilience4j.circuitbreaker.instances.sii.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.sii.waitDurationInOpenState=${RESILIENCE4J_WAIT_DURATION_IN_OPEN_STATE:10s}
resilience4j.circuitbreaker.instances.sii.failureRateThreshold=${RESILIENCE4J_FAILURE_RATE_THRESHOLD:50.0}

# Phase 23: AI Memory (PgVector)
langchain4j.pgvector.host=${POSTGRES_HOST}
langchain4j.pgvector.port=${POSTGRES_PORT}
langchain4j.pgvector.user=${POSTGRES_USER}
langchain4j.pgvector.password=${POSTGRES_PASSWORD}
langchain4j.pgvector.database=${POSTGRES_DB}
langchain4j.pgvector.table=embeddings
langchain4j.pgvector.dimension=${PGVECTOR_DIMENSION}

# Phase 24: The Time Gem (Audit)
javers.sqlSchema=public
javers.mappingStyle=FIELD

# Phase 25: The Reality Gem (DX)
# Spring Boot Docker Compose will automatically start 'docker-compose.yml' on bootRun
spring.docker.compose.enabled=false

# Phase 27: The Space Gem (Observability)
management.tracing.sampling.probability=${TRACING_SAMPLING_PROBABILITY}
management.otlp.tracing.endpoint=${OTLP_TRACING_ENDPOINT}

# Phase 28: The Power Gem (Chaos)
chaos.monkey.enabled=${CHAOS_MONKEY_ENABLED}
chaos.monkey.watcher.repository=true
chaos.monkey.watcher.service=true
chaos.monkey.watcher.rest-controller=true
# Attacks are disabled by default, enable via Actuator or profile
chaos.monkey.assaults.latencyActive=false
chaos.monkey.assaults.exceptionsActive=false

#Debug
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.web.client.RestTemplate=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web.cors=DEBUG

server.port=8080
jwt.secret=EstaEsUnaClaveSecretaMuyLargaYSeguraParaDesarrolloLocal123456
jwt.expiration=86400000

# ==============================================================
# ? CERTIFICADO SII (Para callar los errores del log)
# ==============================================================
# Apunta a un archivo dummy por ahora para que el scheduler no falle
sii.certificate.path=classpath:dummy.p12
sii.certificate.password=123456